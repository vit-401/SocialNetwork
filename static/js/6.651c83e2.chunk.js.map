{"version":3,"sources":["components/Button/Button.tsx","components/Button/Button.module.scss","assets/images/users/bg-user.jpg","pages/Users/User/User.module.scss","components/Paginator/Paginator.module.scss","pages/Users/Users.module.scss","pages/Users/UsersSearchForm/UsersSearchForm.module.scss","pages/Users/UsersPageHeader/UsersPageHeader.module.scss","pages/Users/User/User.tsx","components/Paginator/Paginator.tsx","redux/users-selectors.ts","pages/Users/UsersSearchForm/UsersSearchForm.tsx","pages/Users/UsersPageHeader/UsersPageHeader.tsx","pages/Users/Users.tsx","pages/Users/UsersContainer.tsx"],"names":["Button","className","children","onClick","white","restProps","classNames","s","button","module","exports","User","user","follow","unfollow","followingInProgress","userLarge","backgroundImage","photos","large","testBg","userWrapper","userBox","background","style","followers","friendMeta","alt","src","noImg","userPhoto","friendName","to","id","linkToProfile","name","country","friendInfo","frndInfoItem","fieldName","followed","btn","disabled","some","Paginator","currentPage","onPageChanged","pageSize","totalItemsCount","portionSize","pageCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginationWrapper","pagBtn","prevBtn","filter","p","map","key","classnames","selected","numberItem","getUsers","state","usersState","users","getTotalUsersCount","totalUsersCount","getPageSize","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","getUsersFilter","usersSearchValidateForm","values","UsersSearchForm","React","memo","props","useSelector","enableReinitialize","initialValues","term","friend","String","validate","onSubmit","setSubmitting","onFilterChanged","isSubmitting","formWrapper","usersForm","type","usersSearchInput","as","usersSelector","value","searchBtn","UsersPageHeader","centralMeta","leftBlock","pageTitle","followCount","rightBlock","Users","dispatch","useDispatch","history","useHistory","useEffect","parsed","queryString","location","search","substring","actualPage","actualFilter","page","Number","requestUsersAction","query","pathname","path","DEVELOPERS","followUser","unfollowUser","usersPageWrapper","centralUsersMeta","row","u","UsersPage","Preloader"],"mappings":"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","file":"static/js/6.651c83e2.chunk.js","sourcesContent":["import React, {ButtonHTMLAttributes, DetailedHTMLProps} from 'react'\r\nimport classNames from 'classnames'\r\nimport s from './Button.module.scss'\r\n\r\ntype DefaultButtonPropsType = DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>;\r\n\r\ntype ButtonPropsType = DefaultButtonPropsType & {\r\n   white?: boolean\r\n}\r\n\r\nexport const Button: React.FC<ButtonPropsType> = ({className, children, onClick, white, ...restProps}) => {\r\n\r\n   return (\r\n       <button {...restProps}\r\n               className={classNames(s.button, className, {\r\n                  [s.white]: white,\r\n               })}\r\n               onClick={onClick}>{children}\r\n       </button>\r\n   )\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2EByc\"};","module.exports = __webpack_public_path__ + \"static/media/bg-user.4e482b6b.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userWrapper\":\"User_userWrapper__3fFy_\",\"userBox\":\"User_userBox__2vs5u\",\"background\":\"User_background__frcnQ\",\"followers\":\"User_followers__3-zi1\",\"friendMeta\":\"User_friendMeta__3IPD4\",\"userPhoto\":\"User_userPhoto__3FYK_\",\"friendName\":\"User_friendName__199OP\",\"country\":\"User_country__3l5b5\",\"friendInfo\":\"User_friendInfo__N2Wbf\",\"frndInfoItem\":\"User_frndInfoItem__1QjZd\",\"fieldName\":\"User_fieldName__mOsNg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginationWrapper\":\"Paginator_paginationWrapper__3q0fG\",\"numberItem\":\"Paginator_numberItem__1_V2e\",\"selected\":\"Paginator_selected__1Xx4Q\",\"pagBtn\":\"Paginator_pagBtn__nVHHX\",\"prevBtn\":\"Paginator_prevBtn__DBdCZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPageWrapper\":\"Users_usersPageWrapper__39OU8\",\"centralUsersMeta\":\"Users_centralUsersMeta__1Kr33\",\"row\":\"Users_row__1f98-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formWrapper\":\"UsersSearchForm_formWrapper__jJxgc\",\"usersForm\":\"UsersSearchForm_usersForm__2Ydyy\",\"usersSearchInput\":\"UsersSearchForm_usersSearchInput__3McgG\",\"usersSelector\":\"UsersSearchForm_usersSelector__2Zv_h\",\"searchBtn\":\"UsersSearchForm_searchBtn__1mSXn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centralMeta\":\"UsersPageHeader_centralMeta__2t3iP\",\"leftBlock\":\"UsersPageHeader_leftBlock__6rjp9\",\"pageTitle\":\"UsersPageHeader_pageTitle__3pY7T\",\"followCount\":\"UsersPageHeader_followCount__Bmmzt\"};","import noImg from '../../../assets/images/users/no-image-100.png'\r\nimport testBg from '../../../assets/images/users/bg-user.jpg'\r\nimport React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {UsersType} from '../../../redux/users-reducer'\r\nimport {Button} from '../../../components/Button/Button'\r\nimport s from './User.module.scss'\r\n\r\ntype UserType = {\r\n    user: UsersType\r\n    follow: (id: number) => void\r\n    unfollow: (id: number) => void\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nexport const User: React.FC<UserType> = ({user, follow, unfollow, followingInProgress}) => {\r\n\r\n    const userLarge = {\r\n        backgroundImage: `url(${user.photos.large ? user.photos.large : testBg})`,\r\n    }\r\n\r\n    return (\r\n        <div className={s.userWrapper}>\r\n            <div className={s.userBox}>\r\n                <div className={s.background} style={userLarge}>\r\n                    <span className={s.followers}>\r\n                        Followers: 120\r\n                    </span>\r\n                </div>\r\n                <div className={s.friendMeta}>\r\n                    <img alt={'avatar'} src={user.photos.large != null\r\n                        ? user.photos.large\r\n                        : noImg}\r\n                         className={s.userPhoto}\r\n                    />\r\n                    <div className={s.friendName}>\r\n                        <NavLink to={'/profile/' + user.id} className={s.linkToProfile}>{user.name}</NavLink>\r\n                        <span className={s.country}>California, USA</span>\r\n                    </div>\r\n                    <ul className={s.friendInfo}>\r\n                        <li className={s.frndInfoItem}>\r\n                            <span className={s.fieldName}>User id:</span>\r\n                            {user.id}\r\n                        </li>\r\n                        <li className={s.frndInfoItem}>\r\n                            <span className={s.fieldName}>Followed:</span>\r\n                            {user.followed ? 'Yes' : 'No'}\r\n                        </li>\r\n                    </ul>\r\n                    {\r\n                        user.followed ? <Button\r\n                                className={s.btn}\r\n                                disabled={followingInProgress.some(id => id === user.id)}\r\n                                onClick={() => {\r\n                                    unfollow(user.id)\r\n                                }}>Unfollow</Button>\r\n                            : <Button\r\n                                className={s.btn}\r\n                                disabled={followingInProgress.some(id => id === user.id)}\r\n                                onClick={() => {\r\n                                    follow(user.id)\r\n                                }}>Follow</Button>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n","import React, {useState} from 'react'\r\nimport classnames from 'classnames'\r\nimport s from './Paginator.module.scss'\r\n\r\ntype PropsType = {\r\n    currentPage: number\r\n    onPageChanged: (p: number) => void\r\n    pageSize: number\r\n    totalItemsCount: number\r\n    portionSize?: number\r\n}\r\n\r\nexport const Paginator: React.FC<PropsType> = (\r\n    {currentPage, onPageChanged, pageSize, totalItemsCount, portionSize = 10}\r\n) => {\r\n\r\n    const pageCount = Math.ceil(totalItemsCount / pageSize)\r\n\r\n    const pages = []\r\n    for (let i = 1; i <= pageCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    const portionCount = Math.ceil(pageCount / portionSize)\r\n    const [portionNumber, setPortionNumber] = useState<number>(1)\r\n    const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n    const rightPortionPageNumber = portionNumber * portionSize + 1\r\n\r\n    const prevPortionNumberHandler = () => {\r\n        setPortionNumber(portionNumber - 1)\r\n    }\r\n\r\n    const nextPortionNumberHandler = () => setPortionNumber(portionNumber + 1)\r\n\r\n    return (\r\n        <div className={s.paginationWrapper}>\r\n            {portionNumber > 1\r\n            && <button onClick={prevPortionNumberHandler} className={`${s.pagBtn} ${s.prevBtn}  `}/>}\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                .map((p, i) => {\r\n                    return <span key={`number_items${i}`}\r\n                                 className={classnames({\r\n                                     [s.selected]: currentPage === p\r\n                                 }, s.numberItem)}\r\n                                 onClick={() => {\r\n                                     onPageChanged(p)\r\n                                 }}>{p}</span>\r\n                })}\r\n            {portionCount > portionNumber\r\n            && <button onClick={nextPortionNumberHandler} className={s.pagBtn}/>}\r\n        </div>\r\n    )\r\n}\r\n","import {UsersType} from './users-reducer'\r\nimport {AppStateType} from '../app/store';\r\n\r\nexport const getUsers = (state: AppStateType): Array<UsersType> => {\r\n    return state.usersState.users\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType): number => {\r\n    return state.usersState.totalUsersCount\r\n}\r\n\r\nexport const getPageSize = (state: AppStateType): number => {\r\n    return state.usersState.pageSize\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType): number => {\r\n    return state.usersState.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType): boolean => {\r\n    return state.usersState.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType): Array<number> => {\r\n    return state.usersState.followingInProgress\r\n}\r\n\r\nexport const getUsersFilter = (state: AppStateType) => {\r\n    return state.usersState.filter\r\n}\r\n\r\n\r\n","import {Form, Formik, Field} from 'formik';\r\nimport React from 'react';\r\nimport {FilterType} from '../../../redux/users-reducer';\r\nimport {useSelector} from 'react-redux';\r\nimport {getUsersFilter} from '../../../redux/users-selectors';\r\n\r\nimport s from './UsersSearchForm.module.scss'\r\nimport {Button} from '../../../components/Button/Button';\r\n\r\nconst usersSearchValidateForm = (values: any) => {\r\n    const errors = {};\r\n    return errors;\r\n}\r\n\r\ntype PropsType = {\r\n    onFilterChanged: (filter: FilterType) => void\r\n}\r\n\r\ntype FriendFormType = 'true' | 'false' | 'null';\r\n\r\ntype FormType = {\r\n    term: string,\r\n    friend: FriendFormType\r\n}\r\n\r\nexport const UsersSearchForm: React.FC<PropsType> = React.memo((props) => {\r\n\r\n    const filter = useSelector(getUsersFilter)\r\n\r\n    const submit = (values: FormType, {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\r\n        //convert string to boolean\r\n        const filter: FilterType = {\r\n            term: values.term,\r\n            friend: values.friend === 'null' ? null : values.friend === 'true' ? true : false\r\n        }\r\n        //onFilterChanged get filter and include this value in requestUsers(1, pageSize, filter)\r\n        //requestUsers do request in redux\r\n        props.onFilterChanged(filter)\r\n        setSubmitting(false)\r\n    }\r\n\r\n    return <Formik\r\n        //initial values === redux filter values\r\n        //useEffect work after first render and current values take later, so\r\n        //the enableReinitialize prop resets form if initialValues is changed\r\n        enableReinitialize\r\n        initialValues={{term: filter.term, friend: String(filter.friend) as FriendFormType}}\r\n        validate={usersSearchValidateForm}\r\n        onSubmit={submit}>\r\n\r\n        {({isSubmitting}) => (\r\n            <div className={s.formWrapper}>\r\n                <Form className={s.usersForm}>\r\n                    <Field type=\"text\" name=\"term\" className={s.usersSearchInput}/>\r\n                    <Field name=\"friend\" as=\"select\" className={s.usersSelector}>\r\n                        <option value=\"null\">All</option>\r\n                        <option value=\"true\">Only following</option>\r\n                        <option value=\"false\">Only unfollowing</option>\r\n                    </Field>\r\n                    <Button type=\"submit\" disabled={isSubmitting} className={s.searchBtn}>\r\n                        Find\r\n                    </Button>\r\n                </Form>\r\n            </div>\r\n        )}\r\n    </Formik>\r\n})\r\n","import {FilterType} from '../../../redux/users-reducer';\r\nimport React from 'react';\r\nimport {UsersSearchForm} from '../UsersSearchForm/UsersSearchForm';\r\n\r\nimport s from './UsersPageHeader.module.scss';\r\n\r\ntype UsersPageHeaderProps = {\r\n    onFilterChanged: (filter: FilterType) => void\r\n}\r\n\r\nexport const UsersPageHeader: React.FC<UsersPageHeaderProps> = ({ onFilterChanged}) => {\r\n    return (\r\n        <div className={s.centralMeta}>\r\n            <div className={s.leftBlock}>\r\n                <div className={s.pageTitle}>Friends / Followers\r\n                    <span className={s.followCount}>55</span>\r\n                </div>\r\n            </div>\r\n            <div className={s.rightBlock}>\r\n                <UsersSearchForm onFilterChanged={onFilterChanged}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect} from 'react'\r\nimport {User} from './User/User'\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {FilterType, follow, unfollow} from '../../redux/users-reducer'\r\nimport {Paginator} from '../../components/Paginator/Paginator'\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers,\r\n    getUsersFilter\r\n} from '../../redux/users-selectors';\r\nimport {useHistory} from 'react-router-dom';\r\nimport * as queryString from 'querystring';\r\n\r\nimport s from './Users.module.scss'\r\nimport {UsersPageHeader} from './UsersPageHeader/UsersPageHeader';\r\nimport {path} from '../../app/App';\r\nimport {requestUsersAction} from '../../redux/redux-sagas/users-sagas';\r\n\r\ntype QueryParamsType = { term?: string, page?: string, friend?: string };\r\n\r\nexport const Users: React.FC =\r\n    (props) => {\r\n        const followingInProgress = useSelector(getFollowingInProgress)\r\n        const totalUsersCount = useSelector(getTotalUsersCount)\r\n        const currentPage = useSelector(getCurrentPage)\r\n        const pageSize = useSelector(getPageSize)\r\n        const filter = useSelector(getUsersFilter)\r\n        const users = useSelector(getUsers)\r\n\r\n        const dispatch = useDispatch()\r\n        const history = useHistory()\r\n\r\n        //this effect get first url params and set it to redux\r\n        useEffect(() => {\r\n            //read url params from location and convert it to object using 'queryString'\r\n            //there is excess '?'. delete it use 'substring'\r\n            const parsed = queryString\r\n                .parse(history.location.search.substring(1)) as QueryParamsType\r\n\r\n            let actualPage = currentPage\r\n            let actualFilter = filter\r\n\r\n            //if has actual value in url we can assign it 'actualPage' and convert string pageNumber to number\r\n            //after that this value go to request\r\n            if (!!parsed.page) actualPage = Number(parsed.page)\r\n            //we can't change filter mutable\r\n            if (!!parsed.term) actualFilter = {...actualFilter, term: parsed.term as string}\r\n\r\n            //check empty url\r\n            switch (parsed.friend) {\r\n                case 'null':\r\n                    actualFilter = {...actualFilter, friend: null}\r\n                    break\r\n                case 'true':\r\n                    actualFilter = {...actualFilter, friend: true}\r\n                    break\r\n                case 'false':\r\n                    actualFilter = {...actualFilter, friend: false}\r\n                    break\r\n            }\r\n\r\n            dispatch(requestUsersAction(actualPage, pageSize, actualFilter))\r\n        }, [])\r\n\r\n        // this effect get filter from redux after changing and push settings to url from search(term,friend)\r\n        // url setting has dependency = filter, currentPage\r\n        useEffect(() => {\r\n\r\n            const query: QueryParamsType = {}\r\n            //if term doesn't empty\r\n            if (!!filter.term) query.term = filter.term\r\n            //add friend if !== null - default value in API\r\n            if (filter.friend !== null) query.friend = String(filter.friend)\r\n            //add currentPage if !== 1 - default value in API\r\n            if (currentPage !== 1) query.page = String(currentPage)\r\n\r\n            history.push({\r\n                pathname: path.DEVELOPERS,\r\n                search: queryString.stringify(query)\r\n            })\r\n        }, [filter, currentPage])\r\n\r\n        const onPageChanged = (currentPage: number) => {\r\n            dispatch(requestUsersAction(currentPage, pageSize, filter))\r\n        }\r\n        const onFilterChanged = (filter: FilterType) => {\r\n            dispatch(requestUsersAction(1, pageSize, filter))\r\n        }\r\n        const followUser = (id: number) => {\r\n            dispatch(follow(id))\r\n        }\r\n        const unfollowUser = (id: number) => {\r\n            dispatch(unfollow(id))\r\n        }\r\n\r\n        return (\r\n            <div className={s.usersPageWrapper}>\r\n                <UsersPageHeader onFilterChanged={onFilterChanged}/>\r\n                <div>\r\n                    <Paginator currentPage={currentPage}\r\n                               onPageChanged={onPageChanged}\r\n                               pageSize={pageSize}\r\n                               totalItemsCount={totalUsersCount}\r\n                    />\r\n                    <div className={s.centralUsersMeta}>\r\n                        <div className={s.row}>\r\n                            {users.map(u => <User key={u.id}\r\n                                                  user={u}\r\n                                                  follow={followUser}\r\n                                                  unfollow={unfollowUser}\r\n                                                  followingInProgress={followingInProgress}/>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n","import React from 'react'\r\nimport {Users} from './Users'\r\nimport {useSelector} from 'react-redux'\r\nimport {getIsFetching} from '../../redux/users-selectors'\r\nimport {Preloader} from '../../components/Preloader/Preloader'\r\nimport {FilterType, UsersType} from '../../redux/users-reducer'\r\n\r\ntype UserPagePropsType = {\r\n    users: Array<UsersType>\r\n    totalUsersCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    followingInProgress: Array<number>\r\n    filter: FilterType\r\n}\r\n\r\nexport const UsersPage: React.FC<UserPagePropsType> = (props) => {\r\n\r\n    const isFetching = useSelector(getIsFetching)\r\n\r\n    return (\r\n        <>\r\n            {isFetching ? <Preloader/> : null}\r\n            <Users/>\r\n        </>\r\n    )\r\n}\r\n"],"sourceRoot":""}