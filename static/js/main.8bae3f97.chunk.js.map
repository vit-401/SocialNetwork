{"version":3,"sources":["pages/Main/Main.module.scss","components/Preloader/Preloader.module.scss","pages/Header/Header.module.scss","serviceWorker.ts","app/store.ts","index.tsx","utils/objectHelpers.ts","redux/users-reducer.ts","api/auth-api.ts","api/security-api.ts","redux/auth-reducer.ts","api/users-api.ts","components/Preloader/Preloader.tsx","api/profile-api.ts","redux/profile-reducer.ts","redux/app-reducer.ts","app/App.module.scss","pages/Header/Header.tsx","pages/Header/HeaderContainer.tsx","pages/404/Page404.tsx","pages/Main/Main.tsx","hoc/withSuspenseH.tsx","app/App.tsx","assets/images/users/no-image-100.png","redux/dialogs-reducer.ts","redux/redux-sagas/users-sagas.ts","api/api.ts","api/chat-api.ts","redux/chat-reducer.ts","assets/images/logo.png","assets/images/header/question-mark-128.png","assets/images/header/exit-100.png","assets/images/app/preloader.gif"],"names":["module","exports","Boolean","window","location","hostname","match","rootWatcher","rootReducer","combineReducers","profileState","profileReducer","dialogsState","dialogsReducer","usersState","usersReducer","authState","authReducer","app","appReducer","form","formReducer","chat","chatReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","thunkMiddleware","all","usersWatcherSaga","run","ReactDOM","render","StrictMode","App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","initializeState","users","totalUsersCount","pageSize","currentPage","isFetching","followingInProgress","filter","term","friend","state","action","type","userID","followed","totalCount","payload","userId","id","actions","followSuccess","unfollowSuccess","setUsers","setCurrentPage","setUsersTotalCount","toggleIsFetching","toggleFollowingProgress","setFilter","_followUnfollowFlow","dispatch","apiMethod","actionCreator","a","resultCode","ResultCodes","Success","follow","usersAPI","bind","unfollow","authAPI","axiosInstance","get","res","data","email","password","rememberMe","captcha","post","delete","securityAPI","login","isAuth","captchaUrl","getAuthUserData","meData","ResultCodeCaptcha","CaptchaIsRequired","getCaptchaUrl","messages","length","stopSubmit","_error","url","logout","getUsers","Preloader","className","s","preloader","src","alt","profileAPI","status","put","photoFile","formData","FormData","append","headers","profile","initialState","posts","likeCount","postNewMessageText","userStatus","photos","addPost","setUserProfileData","getUserStatus","setOwnProfileStatus","savePhotoSuccess","getUserProfileData","getStatusFromUser","updateOwnProfileStatus","savePhoto","file","saveProfileData","getState","Error","Promise","reject","initialized","initializeApp","promise","Header","props","smallProfileImg","useSelector","small","topBar","logoWrapper","logoLink","href","logoImg","logoName","topArea","pageNameWrapper","pageName","useLocation","pathname","substring","userImg","isAuthState","undefinedUserImg","to","exitIconWrapper","exit","onClick","exitIcon","HeaderContainer","this","React","Component","connect","Page404","Main","useDispatch","largeProfileImg","large","userName","fullName","isOwner","mainBlockWrapper","gap","row","userProfile","mainBg","profileAuthor","profileImgBlock","mainAuthorImg","imageUpload","inputLabel","photoLoad","onChange","e","target","files","profileNavSection","navTabs","shortAuthorInfo","country","navLinks","active","path","PROFILE","activeClassName","DIALOGS","CHAT","DEVELOPERS","withSuspense","WrappedComponent","restProps","Suspense","fallback","Login","lazy","default","LoginPage","ProfileContainer","DialogsContainer","ChatPage","UsersPage","LOGIN","catchAllUnhandledErrors","alert","container","content","exact","withRouter","dialogs","name","dialogNewMessageText","addMessage","requestUsersWorkerSaga","requestPage","call","requestUsersAction","takeEvery","axios","create","withCredentials","baseURL","ws","subscribers","closeHandler","log","setTimeout","createChannel","messageHandler","newMessages","JSON","parse","forEach","removeEventListener","close","WebSocket","addEventListener","chatAPI","callback","push","send","_newMessageHandler","newMessageHandlerCreator","startMessagesListening","stopMessagesListening","sendMessage"],"mappings":"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","file":"static/js/main.8bae3f97.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainBlockWrapper\":\"Main_mainBlockWrapper__370jK\",\"row\":\"Main_row__2uu4Q\",\"userProfile\":\"Main_userProfile__29KJK\",\"mainBg\":\"Main_mainBg__1JG0j\",\"profileAuthor\":\"Main_profileAuthor__1tdlz\",\"profileImgBlock\":\"Main_profileImgBlock__2tcE1\",\"mainAuthorImg\":\"Main_mainAuthorImg__3hrR9\",\"imageUpload\":\"Main_imageUpload__2kCoZ\",\"inputLabel\":\"Main_inputLabel__2y6Nx\",\"photoLoad\":\"Main_photoLoad__Xh9My\",\"profileNavSection\":\"Main_profileNavSection__3qboy\",\"navTabs\":\"Main_navTabs__3GlQ2\",\"shortAuthorInfo\":\"Main_shortAuthorInfo__2S-eX\",\"userName\":\"Main_userName__34IOK\",\"country\":\"Main_country__3Buak\",\"navLinks\":\"Main_navLinks__1jVbu\",\"active\":\"Main_active__24qZr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__2rcTU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topBar\":\"Header_topBar__ULkZV\",\"logoWrapper\":\"Header_logoWrapper__bEotb\",\"logoLink\":\"Header_logoLink__p_dk7\",\"logoName\":\"Header_logoName__1QTnM\",\"logoImg\":\"Header_logoImg__2txDO\",\"topArea\":\"Header_topArea__2vLVr\",\"pageNameWrapper\":\"Header_pageNameWrapper__1U2ao\",\"pageName\":\"Header_pageName__38-kl\",\"userImg\":\"Header_userImg__1tp5r\",\"isAuthState\":\"Header_isAuthState__3J9-1\",\"login\":\"Header_login__2w5tS\",\"exitIconWrapper\":\"Header_exitIconWrapper__36YoO\",\"exit\":\"Header_exit__1_u3W\",\"exitIcon\":\"Header_exitIcon__3B2eJ\"};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import {Action, applyMiddleware, combineReducers, compose, createStore} from 'redux'\r\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk'\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport {profileReducer} from '../redux/profile-reducer';\r\nimport {dialogsReducer} from '../redux/dialogs-reducer';\r\nimport {usersReducer} from '../redux/users-reducer';\r\nimport {authReducer} from '../redux/auth-reducer';\r\nimport {appReducer} from '../redux/app-reducer';\r\nimport {chatReducer} from '../redux/chat-reducer';\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport {all} from 'redux-saga/effects';\r\nimport {usersWatcherSaga} from '../redux/redux-sagas/users-sagas';\r\n\r\nconst rootReducer = combineReducers({\r\n   profileState: profileReducer,\r\n   dialogsState: dialogsReducer,\r\n   usersState: usersReducer,\r\n   authState: authReducer,\r\n   app: appReducer,\r\n   form: formReducer,\r\n   chat: chatReducer\r\n})\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\n\r\ntype PropertiesTypes<T> = T extends { [key: string]: infer U } ? U : never\r\n\r\n//AC get type of Action which can be object with 'key:string' ang function with (...args) which return something\r\n//example! followSuccess: (userID: number) => ({type: 'USERS/FOLLOW', userID} as const)\r\nexport type InferActionsTypes<T extends { [key: string]: (...args: any) => any }> = ReturnType<PropertiesTypes<T>>\r\n\r\n//Thunk...\r\nexport type BaseThunkType<A extends Action,R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nconst sagaMiddleware = createSagaMiddleware()\r\n\r\nexport let store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware,sagaMiddleware)))\r\n\r\nsagaMiddleware.run(rootWatcher)\r\n\r\nfunction* rootWatcher() {\r\n   yield all([usersWatcherSaga()])\r\n}\r\n","import * as serviceWorker from './serviceWorker';\r\nimport {HashRouter} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app/App';\r\nimport React from 'react';\r\nimport './index.scss';\r\nimport {store} from './app/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <Provider store={store}>\r\n        <App/>\r\n      </Provider>\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","export const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n   return items.map((u: any) => {\r\n      if (u[objPropName] === itemId) {\r\n         return {...u, ...newObjProps}\r\n      }\r\n      return u;\r\n   })\r\n}\r\n","import {usersAPI} from '../api/users-api';\r\nimport {Dispatch} from 'redux';\r\nimport {APIResponseType, ResultCodes} from '../api/api';\r\nimport {updateObjectInArray} from '../utils/objectHelpers';\r\nimport {BaseThunkType, InferActionsTypes} from '../app/store';\r\n\r\nlet initializeState = {\r\n    users: [] as UsersType[],\r\n    totalUsersCount: 0,\r\n    pageSize: 16,\r\n    currentPage: 555,\r\n    isFetching: false,\r\n    followingInProgress: [] as number[], //array of users id\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean\r\n    }\r\n};\r\n\r\nexport type UsersInitializeStateType = typeof initializeState\r\nexport type FilterType = typeof initializeState.filter\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport const usersReducer = (state: UsersInitializeStateType = initializeState, action: ActionsType): UsersInitializeStateType => {\r\n    switch (action.type) {\r\n        case 'SN/USERS/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userID, 'id', {followed: true})\r\n            };\r\n        case 'SN/USERS/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userID, 'id', {followed: false})\r\n            };\r\n        case 'SN/USERS/SET-USERS':\r\n            return {...state, users: [...action.users]};\r\n        case 'SN/USERS/SET-CURRENT-PAGE':\r\n            return {...state, currentPage: action.currentPage};\r\n        case 'SN/USERS/SET-USERS-TOTAL-COUNT':\r\n            return {...state, totalUsersCount: action.totalCount};\r\n        case 'SN/USERS/TOGGLE-IS-FETCHING':\r\n            return {...state, isFetching: action.isFetching};\r\n        case 'SN/USERS/FOLLOWING-IN-PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.payload.isFetching\r\n                    ? [...state.followingInProgress, action.payload.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.payload.userId)\r\n            };\r\n        case 'SN/USERS/SET-FILTER':\r\n            return {\r\n                ...state,\r\n                filter: action.payload.filter\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//Action\r\nexport const actions = {\r\n    followSuccess: (userID: number) => ({type: 'SN/USERS/FOLLOW', userID} as const),\r\n    unfollowSuccess: (userID: number) => ({type: 'SN/USERS/UNFOLLOW', userID} as const),\r\n    setUsers: (users: Array<UsersType>) => ({type: 'SN/USERS/SET-USERS', users} as const),\r\n    setCurrentPage: (currentPage: number) => ({\r\n        type: 'SN/USERS/SET-CURRENT-PAGE',\r\n        currentPage\r\n    } as const),\r\n    setUsersTotalCount: (totalCount: number) => ({\r\n        type: 'SN/USERS/SET-USERS-TOTAL-COUNT',\r\n        totalCount\r\n    } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({\r\n        type: 'SN/USERS/TOGGLE-IS-FETCHING', isFetching\r\n    } as const),\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => ({\r\n        type: 'SN/USERS/FOLLOWING-IN-PROGRESS',\r\n        payload: {\r\n            isFetching,\r\n            userId\r\n        }\r\n    } as const),\r\n    setFilter: (filter: FilterType) => ({\r\n        type: 'SN/USERS/SET-FILTER',\r\n        payload: {filter}\r\n    } as const)\r\n};\r\n\r\n//Thunk\r\nconst _followUnfollowFlow = async (dispatch: Dispatch<ActionsType>,\r\n                                   userId: number,\r\n                                   apiMethod: (userId: number) => Promise<APIResponseType>,\r\n                                   actionCreator: (userId: number) => ActionsType) => {\r\n    dispatch(actions.toggleFollowingProgress(true, userId));\r\n    let response = await apiMethod(userId);\r\n\r\n    if (response.resultCode === ResultCodes.Success) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(actions.toggleFollowingProgress(false, userId));\r\n};\r\n\r\nexport const follow = (id: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        await _followUnfollowFlow(dispatch, id, usersAPI.follow.bind(usersAPI), actions.followSuccess);\r\n    };\r\n};\r\n\r\nexport const unfollow = (id: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        await _followUnfollowFlow(dispatch, id, usersAPI.unfollow.bind(usersAPI), actions.unfollowSuccess);\r\n    };\r\n};\r\n\r\n//Type\r\nexport type PhotosType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\n\r\nexport type UsersType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: PhotosType\r\n    followed: boolean\r\n}","import {axiosInstance, APIResponseType, ResultCodeCaptcha, ResultCodes} from './api'\r\n\r\ntype MeResponseDataType = {\r\n      id: number,\r\n      email: string,\r\n      login: string\r\n}\r\n\r\ntype LoginResponseDataType = {\r\n   userId: number\r\n}\r\n\r\nexport const authAPI = {\r\n   me() {\r\n      return axiosInstance.get<APIResponseType<MeResponseDataType>>(`auth/me`)\r\n          .then(res => res.data)\r\n   },\r\n   login(email: string, password: string, rememberMe: boolean = false, captcha: null | string = null) {\r\n      return axiosInstance.post<APIResponseType<LoginResponseDataType, ResultCodeCaptcha | ResultCodes>>(`auth/login`, {email, password, rememberMe, captcha})\r\n          .then(res => res.data)\r\n   },\r\n   logout() {\r\n      return axiosInstance.delete(`auth/login`,)\r\n          .then(res => res.data)\r\n   },\r\n}","import {axiosInstance} from './api'\r\n\r\ntype GetCaptchaUrlResponseType = {\r\n   url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n   getCaptchaUrl() {\r\n      return axiosInstance.get<GetCaptchaUrlResponseType>(`security/get-captcha-url`)\r\n          .then(res => res.data)\r\n   },\r\n}","import {ThunkDispatch} from 'redux-thunk'\r\nimport {authAPI} from '../api/auth-api'\r\nimport {FormAction, stopSubmit} from 'redux-form'\r\nimport {securityAPI} from '../api/security-api'\r\nimport {ResultCodeCaptcha, ResultCodes} from '../api/api'\r\nimport {AppStateType, BaseThunkType, InferActionsTypes} from '../app/store';\r\n\r\nlet initializeState = {\r\n   id: null as (number | null),\r\n   email: null as string | null,\r\n   login: null as string | null,\r\n   isAuth: false,\r\n   captchaUrl: null as string | null\r\n}\r\nexport type AuthInitStateType = typeof initializeState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport const authReducer = (state: AuthInitStateType = initializeState, action: ActionsType): AuthInitStateType => {\r\n   switch (action.type) {\r\n      case 'SN/AUTH/SET-USER-DATA':\r\n      case 'SN/AUTH/GET-CAPTCHA-URL':\r\n         return {...state, ...action.payload}\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   setUserData: (id: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n      type: 'SN/AUTH/SET-USER-DATA',\r\n      payload: {id, email, login, isAuth},\r\n   } as const),\r\n   getCaptchaUrlSuccess: (captchaUrl: string) => ({\r\n      type: 'SN/AUTH/GET-CAPTCHA-URL',\r\n      payload: {captchaUrl},\r\n   } as const)\r\n}\r\n\r\n//Thunk\r\nexport const getAuthUserData = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const meData = await authAPI.me()\r\n       if (meData.resultCode === ResultCodes.Success) {\r\n          let {id, email, login} = meData.data\r\n          dispatch(actions.setUserData(id, email, login, true))\r\n       }\r\n    }\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string | null = null): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType | FormAction>) => {\r\n       const data = await authAPI.login(email, password, rememberMe, captcha)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          dispatch(getAuthUserData())\r\n       } else {\r\n          //captcha = result code 10\r\n          if (data.resultCode === ResultCodeCaptcha.CaptchaIsRequired) {\r\n             dispatch(getCaptchaUrl())\r\n          }\r\n          //incorrect form value\r\n          let messages = data.messages.length > 0 ? data.messages[0] : 'some error'\r\n          dispatch(stopSubmit('login', {_error: messages}))\r\n       }\r\n    }\r\n\r\nexport const getCaptchaUrl = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await securityAPI.getCaptchaUrl()\r\n       const captchaUrl: string = data.url\r\n       dispatch(actions.getCaptchaUrlSuccess(captchaUrl))\r\n    }\r\n\r\nexport const logout = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const response = await authAPI.logout()\r\n       if (response.resultCode === ResultCodes.Success) {\r\n          dispatch(actions.setUserData(null, null, null, false))\r\n       }\r\n    }\r\n\r\n\r\n","import {axiosInstance, GetItemsType, APIResponseType} from './api'\r\n\r\nexport const usersAPI = {\r\n   getUsers(currentPage: number, pageSize: number, term: string = '', friend: null | boolean = null) {\r\n      return axiosInstance.get<GetItemsType>\r\n      (`users?page=${currentPage}&count=${pageSize}&term=${term}`+(friend === null ? '':`&friend=${friend}`))\r\n          .then(res => res.data)\r\n   },\r\n\r\n   follow(userId: number) {\r\n      return axiosInstance.post<APIResponseType>(`follow/${userId}`, {})\r\n          .then(res => res.data)\r\n   },\r\n\r\n   unfollow(userId: number) {\r\n      return axiosInstance.delete(`follow/${userId}`)\r\n          .then(res => res.data) as Promise<APIResponseType>\r\n   },\r\n}","import React from 'react'\r\nimport preloader from '../../assets/images/app/preloader.gif'\r\nimport s from './Preloader.module.scss'\r\n\r\nexport const Preloader: React.FC = () => {\r\n   return (\r\n       <div className={s.preloader}>\r\n          <img src={preloader} alt=\"preloader\"/>\r\n       </div>\r\n   )\r\n}\r\n\r\n","import {axiosInstance, APIResponseType} from './api'\r\nimport {ProfileType} from '../redux/profile-reducer'\r\nimport {PhotosType} from '../redux/users-reducer'\r\n\r\ntype SavePhotoResponseDataType = {\r\n   photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n   getProfile(userId: number) {\r\n      return axiosInstance.get<ProfileType>(`profile/${userId}`)\r\n          .then(res => res.data)\r\n   },\r\n\r\n   getUserStatus(userId: number) {\r\n      return axiosInstance.get<string>(`profile/status/${userId}`)\r\n          .then(res => res.data)\r\n   },\r\n\r\n   updateOwnProfileStatus(status: string) {\r\n      return axiosInstance.put<APIResponseType>(`profile/status`, {status})\r\n          .then(res => res.data)\r\n   },\r\n\r\n   savePhoto(photoFile: File) {\r\n      const formData = new FormData()\r\n      formData.append('image', photoFile)\r\n      return axiosInstance.put<APIResponseType<SavePhotoResponseDataType>>(`profile/photo`, formData, {\r\n         headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n         }\r\n      }).then(res => res.data)\r\n   },\r\n\r\n   saveProfile(profile: ProfileType) {\r\n      return axiosInstance.put<APIResponseType<ProfileType>>(`profile/`, profile)\r\n          .then(res => res.data)\r\n   },\r\n}\r\n","import {ThunkDispatch} from 'redux-thunk'\r\nimport {profileAPI} from '../api/profile-api'\r\nimport {FormAction, stopSubmit} from 'redux-form'\r\nimport {ResultCodes} from '../api/api'\r\nimport {AppStateType, BaseThunkType, InferActionsTypes} from '../app/store';\r\n\r\nlet initialState = {\r\n   posts: [\r\n      {id: 1, message: 'Hello I am props.', likeCount: 21},\r\n      {id: 2, message: 'I am very handsome props', likeCount: 10},\r\n      {id: 3, message: 'I go out from my post pages', likeCount: 5},\r\n   ] as Array<PostType>,\r\n   profile: null as ProfileType | null,\r\n   status: ''\r\n}\r\n\r\nexport type ProfileInitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport const profileReducer = (state: ProfileInitialStateType = initialState,\r\n                               action: ActionsType): ProfileInitialStateType => {\r\n   switch (action.type) {\r\n      case 'SN/PROFILE/ADD-POST':\r\n         return {\r\n            ...state,\r\n            posts: [{id: 4, message: action.postNewMessageText, likeCount: 0}, ...state.posts],\r\n         }\r\n      case 'SN/PROFILE/SET-USER-PROFILE':\r\n         return {...state, profile: action.profile}\r\n      case 'SN/PROFILE/GET-USER-STATUS':\r\n         return {...state, status: action.userStatus}\r\n      case 'SN/PROFILE/UPDATE-PROFILE-STATUS':\r\n         return {...state, status: action.status}\r\n      case 'SN/PROFILE/SAVE-PHOTO-SUCCESS':\r\n         return {...state, profile: {...state.profile, photos: action.photos} as ProfileType}\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   addPost:(postNewMessageText: string) =>\r\n       ({type: 'SN/PROFILE/ADD-POST', postNewMessageText} as const),\r\n   setUserProfileData:(profile: ProfileType) =>\r\n       ({type: 'SN/PROFILE/SET-USER-PROFILE', profile} as const),\r\n   getUserStatus:(userStatus: string) =>\r\n       ({type: 'SN/PROFILE/GET-USER-STATUS', userStatus} as const),\r\n   setOwnProfileStatus:(status: string) =>\r\n       ({type: 'SN/PROFILE/UPDATE-PROFILE-STATUS', status} as const),\r\n   savePhotoSuccess:(photos: PhotosType) => ({type: 'SN/PROFILE/SAVE-PHOTO-SUCCESS', photos} as const)\r\n}\r\n\r\n//Thunk\r\nexport const getUserProfileData = (userId: number): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.getProfile(userId)\r\n       dispatch(actions.setUserProfileData(data))\r\n    }\r\n\r\nexport const getStatusFromUser = (userId: number): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.getUserStatus(userId)\r\n       dispatch(actions.getUserStatus(data))\r\n    }\r\n\r\nexport const updateOwnProfileStatus = (status: string): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.updateOwnProfileStatus(status)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          dispatch(actions.setOwnProfileStatus(status))\r\n       }\r\n    }\r\n\r\nexport const savePhoto = (file: File): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.savePhoto(file)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          dispatch(actions.savePhotoSuccess(data.data.photos))\r\n       }\r\n    }\r\n\r\nexport const saveProfileData = (profile: ProfileType): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType | FormAction>, getState) => {\r\n       const userId = getState().authState.id\r\n       const data = await profileAPI.saveProfile(profile)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          if(userId !== null) {\r\n             dispatch(getUserProfileData(userId))\r\n          } else {\r\n             throw new Error(`userId can't be null`)\r\n          }\r\n       } else {\r\n          //need changing error for different fields\r\n          // dispatch(stopSubmit('edit-profile', {'contacts': {'facebook': messages}}))\r\n          const messages = data.messages.length > 0 ? data.messages[0] : 'some error'\r\n          dispatch(stopSubmit('profile-data', {_error: messages}))\r\n          return Promise.reject(messages)\r\n       }\r\n    }\r\n\r\n//Type\r\n\r\nexport type PostType = {\r\n   id: number\r\n   message: string\r\n   likeCount: number\r\n}\r\nexport type ContactType = {\r\n   github: string\r\n   vk: string\r\n   facebook: string\r\n   instagram: string\r\n   twitter: string\r\n   website: string\r\n   youtube: string\r\n   mainLink: string\r\n}\r\n\r\nexport type PhotosType = {\r\n   small: string | null\r\n   large: string | null\r\n}\r\n\r\nexport type ProfileType = {\r\n   userId: number\r\n   lookingForAJob: boolean\r\n   lookingForAJobDescription: string\r\n   fullName: string\r\n   contacts: ContactType\r\n   aboutMe: string\r\n   photos: PhotosType\r\n}\r\n\r\n\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk'\r\nimport {getAuthUserData} from './auth-reducer'\r\nimport {AppStateType, InferActionsTypes} from '../app/store';\r\n\r\nlet initializeState = {\r\n   initialized: false\r\n}\r\n\r\nexport type AppInitStateType = typeof initializeState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\nexport const appReducer = (state: AppInitStateType = initializeState, action: ActionsType): AppInitStateType => {\r\n   switch (action.type) {\r\n      case 'SN/APP/INITIALIZED_SUCCESS':\r\n         return {...state, initialized: true}\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   initializedSuccess:() => ({\r\n      type: 'SN/APP/INITIALIZED_SUCCESS',\r\n   } as const)\r\n}\r\n\r\n//Thunk\r\nexport const initializeApp = (): ThunkType =>\r\n    (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       let promise = dispatch(getAuthUserData())\r\n       Promise.all([promise])\r\n           .then(() => {\r\n              dispatch(actions.initializedSuccess)\r\n           })\r\n    }\r\n\r\n//Type\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionsType>\r\n\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__13-VE\",\"container\":\"App_container__3ulMh\",\"content\":\"App_content__29hQ9\"};","import React from 'react'\r\nimport s from './Header.module.scss'\r\nimport {NavLink, useLocation} from 'react-router-dom'\r\n\r\nimport logoImg from '../../assets/images/logo.png'\r\nimport undefinedUserImg from '../../assets/images/header/question-mark-128.png'\r\nimport exit from '../../assets/images/header/exit-100.png'\r\nimport {useSelector} from 'react-redux'\r\nimport {AppStateType} from '../../app/store';\r\n\r\ntype HeaderPropsType = {\r\n   isAuth: boolean\r\n   login: string | null\r\n   logout: () => void\r\n}\r\n\r\nexport const Header: React.FC<HeaderPropsType> = (props) => {\r\n\r\n   //get current url, rerender too much!!!\r\n   const HeaderView = () => {\r\n      return useLocation().pathname.substring(1)\r\n   }\r\n\r\n   const smallProfileImg = useSelector<AppStateType, string | null | undefined>(state => state.profileState.profile?.photos.small)\r\n\r\n   return (\r\n       <div className={s.topBar}>\r\n          <div className={s.logoWrapper}>\r\n             <a className={s.logoLink} href=\"#\">\r\n                <img className={s.logoImg} src={logoImg} alt=\"logo\"/>\r\n                <h4 className={s.logoName}>SOCIAL LOGO</h4>\r\n             </a>\r\n          </div>\r\n          <div className={s.topArea}>\r\n             <div className={s.pageNameWrapper}>\r\n                <span className={s.pageName}>\r\n                   {HeaderView()}\r\n                </span>\r\n             </div>\r\n             <div className={s.userImg}>\r\n                {\r\n                   props.isAuth\r\n                       ? <>\r\n                          <h5 className={s.isAuthState}>{props.login}</h5>\r\n                          <img src={smallProfileImg ? smallProfileImg : undefinedUserImg} alt=\"userPhoto\"/>\r\n                       </>\r\n                       : <NavLink to={'/login'} className={s.login}>LOGIN</NavLink>\r\n                }\r\n             </div>\r\n             <span className={s.exitIconWrapper}>\r\n                {\r\n                   props.isAuth\r\n                   && <a className={s.exit} href=\"#\" onClick={props.logout}>\r\n                      <img className={s.exitIcon} src={exit} alt=\"settings\"/>\r\n                   </a>\r\n                }\r\n             </span>\r\n          </div>\r\n       </div>\r\n   )\r\n}\r\n","import React from 'react'\r\nimport {Header} from './Header'\r\nimport {connect} from 'react-redux'\r\nimport {getAuthUserData, logout} from '../../redux/auth-reducer'\r\nimport {AppStateType} from '../../app/store';\r\n\r\ntype OwnPropsType = MapStateType & MapDispatchType\r\n\r\nclass HeaderContainer extends React.Component<OwnPropsType> {\r\n   render() {\r\n      return <Header login={this.props.login}\r\n                     isAuth={this.props.isAuth}\r\n                     logout={this.props.logout}\r\n      />\r\n   }\r\n}\r\n\r\ntype MapStateType = {\r\n   isAuth: boolean\r\n   login: string | null\r\n}\r\n\r\ntype MapDispatchType = {\r\n   getAuthUserData: () => void\r\n   logout: () => void\r\n}\r\n\r\nconst mapState = (state: AppStateType): MapStateType => ({\r\n   isAuth: state.authState.isAuth,\r\n   login: state.authState.login,\r\n})\r\n\r\nexport default connect<MapStateType, MapDispatchType, {}, AppStateType>(\r\n    mapState,\r\n    {getAuthUserData, logout}\r\n)(HeaderContainer)\r\n","import React from 'react'\r\n\r\nexport const Page404: React.FC = () => {\r\n\r\n\r\n   return (\r\n       <div>\r\n          <p>404 NOT FOUND</p>\r\n          this page is under construction\r\n       </div>\r\n   )\r\n}","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {savePhoto} from '../../redux/profile-reducer'\r\nimport undefinedUserImg from '../../assets/images/users/no-image-100.png'\r\nimport s from './Main.module.scss'\r\nimport {path} from '../../app/App';\r\nimport {AppStateType} from '../../app/store';\r\n\r\nexport const Main = () => {\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const mainPhotoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (e.target.files !== null && e.target.files.length) {\r\n         dispatch(savePhoto(e.target.files[0]))\r\n      }\r\n   }\r\n\r\n   const largeProfileImg = useSelector<AppStateType, string | null | undefined>(state => state.profileState.profile?.photos.large)\r\n\r\n   const userName = useSelector<AppStateType, string | null | undefined>(state => state.profileState.profile?.fullName)\r\n\r\n   //get id for editPhoto, show or hide input file\r\n   const profileId = useSelector<AppStateType, number | any>(state => state.profileState.profile?.userId)\r\n   const authId = useSelector<AppStateType, number | any>(state => state.authState.id)\r\n   //edit mode = isOwner\r\n   const isOwner = profileId === authId ? true : false //compare id from profile and auth\r\n\r\n   return (\r\n       <div className={s.mainBlockWrapper}>\r\n          <div className={s.gap}>\r\n             <div className={s.row}>\r\n                <div className={s.userProfile}>\r\n                   <div className={s.mainBg}>\r\n                      <div className={s.profileAuthor}>\r\n                         <div className={s.profileImgBlock}>\r\n                            <img className={s.mainAuthorImg} src={largeProfileImg ? largeProfileImg : undefinedUserImg}\r\n                                 alt=\"author\"/>\r\n                            {\r\n                               isOwner &&\r\n                               <div className={s.imageUpload}>\r\n                                  <label className={s.inputLabel}>\r\n                                     <input className={s.photoLoad} type=\"file\" onChange={mainPhotoSelect}/>\r\n                                  </label>\r\n                               </div>\r\n                            }\r\n                         </div>\r\n                      </div>\r\n                   </div>\r\n                   <div className={s.profileNavSection}>\r\n                      <div className={s.navTabs}>\r\n                         <div className={s.shortAuthorInfo}>\r\n                            <div className={s.userName}>{userName}</div>\r\n                            <div className={s.country}>Ukraine. Kiev</div>\r\n                         </div>\r\n                         <ul className={s.navLinks}>\r\n                            <li className={s.active}>\r\n                               <NavLink to={path.PROFILE} activeClassName={s.active}>Profile</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to={path.DIALOGS} activeClassName={s.active}>Dialogs</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to={path.CHAT}  activeClassName={s.active}>Chat</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to={path.DEVELOPERS}  activeClassName={s.active}>Developers</NavLink>\r\n                            </li>\r\n                         </ul>\r\n                      </div>\r\n                   </div>\r\n                </div>\r\n             </div>\r\n          </div>\r\n       </div>\r\n   )\r\n}\r\n","import React from 'react';\r\nimport {Preloader} from '../components/Preloader/Preloader'\r\n\r\nexport function withSuspense<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n    return (props: any) => {\r\n        let {...restProps} = props\r\n        return (\r\n            <React.Suspense fallback={<Preloader/>}>\r\n                <WrappedComponent {...restProps as WCP}/>\r\n            </React.Suspense>\r\n        )\r\n    }\r\n}\r\n","import React, {ComponentType} from 'react'\r\nimport s from './App.module.scss'\r\nimport HeaderContainer from '../pages/Header/HeaderContainer'\r\nimport {Redirect, Route, Switch, withRouter} from 'react-router-dom'\r\nimport {Preloader} from '../components/Preloader/Preloader'\r\nimport {initializeApp} from '../redux/app-reducer'\r\nimport {Page404} from '../pages/404/Page404'\r\nimport {Main} from '../pages/Main/Main'\r\nimport {connect} from 'react-redux'\r\nimport {compose} from 'redux'\r\nimport {withSuspense} from '../hoc/withSuspenseH';\r\nimport {AppStateType} from './store';\r\n\r\ntype PropsType = MapStateType & MapDispatchToProps\r\n\r\nconst Login = React.lazy(\r\n    () => import('../pages/Login/LoginPage').then(({LoginPage}) => ({default: LoginPage})),\r\n);\r\nconst ProfileContainer = React.lazy(() => import('../pages/Profile/ProfileContainer'))\r\nconst DialogsContainer = React.lazy(() => import('../pages/Dialogs/DialogsContainer'))\r\nconst ChatPage = React.lazy(() => import('../pages/Chat/ChatPage'))\r\nconst UsersPage = React.lazy(\r\n    () => import('../pages/Users/UsersContainer').then(({UsersPage}) => ({default: UsersPage})),\r\n);\r\n\r\nexport const path = {\r\n    PROFILE: '/profile',\r\n    DIALOGS: '/dialogs',\r\n    CHAT: '/chat',\r\n    DEVELOPERS: '/developers',\r\n    LOGIN: '/login',\r\n}\r\n\r\nclass App extends React.Component<PropsType> {\r\n\r\n    catchAllUnhandledErrors = (e: PromiseRejectionEvent) => {\r\n        alert('Some error occurred')\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.initializeApp()\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.initialized) {\r\n            return <Preloader/>\r\n        }\r\n\r\n        return (\r\n            <div className={s.app}>\r\n                <HeaderContainer/>\r\n                <div className={s.container}>\r\n                    <Main/>\r\n                    <div className={s.content}>\r\n                        <Switch>\r\n                            <Route exact path=\"/\" render={() => <Redirect to={path.PROFILE}/>}/>\r\n                            <Route path={path.PROFILE + ':userid?'} render={withSuspense(ProfileContainer)}/>\r\n                            <Route path={path.DIALOGS} render={withSuspense(DialogsContainer)}/>\r\n                            <Route path={path.CHAT}  render={withSuspense(ChatPage)}/>\r\n                            <Route path={path.DEVELOPERS} render={withSuspense(UsersPage)}/>\r\n                            <Route path={path.LOGIN} render={withSuspense(Login)}/>\r\n                            <Route render={withSuspense(Page404)}/>\r\n                        </Switch>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\ntype MapDispatchToProps = {\r\n    initializeApp: () => void\r\n}\r\n\r\ntype MapStateType = {\r\n    initialized: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateType => ({\r\n    initialized: state.app.initialized\r\n})\r\n\r\nexport default compose<ComponentType>(\r\n    withRouter,\r\n    connect<MapStateType, MapDispatchToProps, {}, AppStateType>(mapStateToProps, {initializeApp}),\r\n)(App)\r\n","module.exports = \"data:image/png;base64,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\"","import {InferActionsTypes} from '../app/store';\r\n\r\nlet initializeState = {\r\n   dialogs: [\r\n      {id: 1, name: 'Stanislav Ivanov'},\r\n      {id: 2, name: 'Egor Ivanov'},\r\n      {id: 3, name: 'Vitaliy'},\r\n   ] as Array<DialogType>,\r\n   messages: [\r\n      {id: 1, message: 'Detract yet delight written farther'},\r\n      {id: 2, message: 'An stairs as be lovers'},\r\n      {id: 3, message: 'Unpleasant in in insensible favourable'},\r\n   ] as Array<MessageType>,\r\n}\r\n\r\nexport type DialogInitStateType = typeof initializeState\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\nexport const dialogsReducer = (state: DialogInitStateType = initializeState,\r\n                               action: ActionsTypes): DialogInitStateType => {\r\n   switch (action.type) {\r\n      case 'SN/DIALOGS/ADD-NEW-MESSAGE':\r\n         return {\r\n            ...state,\r\n            messages: [...state.messages, {id: 5, message: action.dialogNewMessageText}]\r\n         }\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   addMessage: (dialogNewMessageText: string) =>\r\n       ({type: 'SN/DIALOGS/ADD-NEW-MESSAGE', dialogNewMessageText} as const)\r\n}\r\n\r\n//Types\r\n\r\nexport type DialogType = {\r\n   id: number\r\n   name: string\r\n}\r\nexport type MessageType = {\r\n   id: number\r\n   message: string\r\n}\r\n\r\n","import {call, put, takeEvery} from 'redux-saga/effects';\r\nimport {actions, FilterType} from '../users-reducer';\r\nimport {usersAPI} from '../../api/users-api';\r\nimport {GetItemsType} from '../../api/api';\r\n\r\nexport function* requestUsersWorkerSaga(action: ReturnType<typeof requestUsersAction>) {\r\n    yield put(actions.toggleIsFetching(true));\r\n    yield put(actions.setCurrentPage(action.requestPage));\r\n    yield put(actions.setFilter(action.filter));\r\n\r\n    const data:GetItemsType = yield call(usersAPI.getUsers, action.requestPage, action.pageSize, action.filter.term, action.filter.friend)\r\n\r\n    yield put(actions.setUsers(data.items));\r\n    yield put(actions.toggleIsFetching(false));\r\n    yield put(actions.setUsersTotalCount(data.totalCount));\r\n}\r\n\r\nexport const requestUsersAction = (requestPage: number, pageSize: number, filter: FilterType) => ({\r\n    type: 'USER/REQUEST-USERS',\r\n    requestPage,\r\n    pageSize,\r\n    filter\r\n} as const)\r\n\r\nexport function* usersWatcherSaga() {\r\n    yield takeEvery('USER/REQUEST-USERS', requestUsersWorkerSaga)\r\n}\r\n","import axios from 'axios'\r\nimport {UsersType} from '../redux/users-reducer'\r\n\r\nexport const axiosInstance = axios.create({\r\n   withCredentials: true,\r\n   baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n   headers: {\r\n      'API-KEY': '024c72d0-5556-46a2-a9a9-4eba6c2facdb'\r\n   },\r\n})\r\n\r\nexport type APIResponseType<D = {}, RC = ResultCodes> = {\r\n   data: D\r\n   messages: string[]\r\n   resultCode: RC\r\n}\r\n\r\nexport enum ResultCodes {\r\n   Success = 0,\r\n   Error = 1,\r\n}\r\n\r\nexport enum ResultCodeCaptcha {\r\n   CaptchaIsRequired = 10\r\n}\r\n\r\nexport type GetItemsType = {\r\n   items: UsersType[]\r\n   totalCount: number\r\n   error: string | null\r\n}\r\n","let subscribers = [] as SubscriberType[]\r\n\r\nlet ws: WebSocket | null;\r\n\r\nconst closeHandler = () => {\r\n    console.log('CLOSE WS')\r\n    setTimeout(createChannel, 3000)\r\n}\r\n\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data);\r\n    subscribers.forEach(s => s(newMessages))\r\n}\r\n\r\nfunction createChannel() {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    ws?.addEventListener('close', closeHandler)\r\n    ws?.addEventListener('message', messageHandler)\r\n}\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subscribers = []\r\n        ws?.removeEventListener('close', closeHandler)\r\n        ws?.removeEventListener('message', messageHandler)\r\n        ws?.close()\r\n    },\r\n    subscribe(callback: SubscriberType) {\r\n        subscribers.push(callback)\r\n        return () => {\r\n            subscribers = subscribers.filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(callback: SubscriberType) {\r\n        subscribers = subscribers.filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype SubscriberType = (messages: ChatMessageType[]) => void\r\n\r\nexport type ChatMessageType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\n","import {ThunkDispatch} from 'redux-thunk'\r\nimport {chatAPI, ChatMessageType} from '../api/chat-api';\r\nimport {Dispatch} from 'redux';\r\nimport {AppStateType, BaseThunkType, InferActionsTypes} from '../app/store';\r\n\r\nlet initializeState = {\r\n    messages: [] as ChatMessageType[]\r\n}\r\n\r\nexport const chatReducer = (state: AuthInitStateType = initializeState, action: ActionsType): AuthInitStateType => {\r\n    switch (action.type) {\r\n        case 'SN/CHAT/MESSAGES_RECEIVED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages]\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageType[]) => ({\r\n        type: 'SN/CHAT/MESSAGES_RECEIVED',\r\n        payload: {messages},\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageType[]) => void) | null = null\r\n\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages))\r\n        }\r\n    }\r\n\r\n    return _newMessageHandler\r\n}\r\n\r\n//Thunk\r\nexport const startMessagesListening = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n        chatAPI.start()\r\n        await chatAPI.subscribe(newMessageHandlerCreator(dispatch))\r\n    }\r\n\r\nexport const stopMessagesListening = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n        await chatAPI.unsubscribe(newMessageHandlerCreator(dispatch))\r\n        chatAPI.stop()\r\n    }\r\n\r\nexport const sendMessage = (message: string): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n        await chatAPI.sendMessage(message)\r\n    }\r\n\r\nexport type AuthInitStateType = typeof initializeState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.63892a89.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/preloader.5861c44d.gif\";"],"sourceRoot":""}